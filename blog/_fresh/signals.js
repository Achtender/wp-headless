import{a as m,c as z,e as C}from"./chunk-IHJAWXS3.js";import{d as g}from"./chunk-3TT4ZS6S.js";var w,a,o=null,c=new Set,x=0,y=!1,u=new Set,_=class{constructor(e){this._s=new Set,this._d=new Set,this._p=0,this._v=void 0,this._r=!1,this._q=!1,this._c=!1,this.t=!1,this._v=e}toString(){return""+this.value}peek(){return a._c&&this._d.size===0&&q(this),this._v}get value(){return a._c&&this._d.size===0&&(q(this),a===w)||(this._s.add(a),a._d.add(this),u.delete(this),(x>0&&this._p>0||y&&this._d.size===0)&&j(this)),this._v}set value(e){if(this._r)throw new Error("Computed signals are readonly");if(this._v!==e){this._v=e;let t=c.size===0;if(c.add(this),this._p===0&&A(this),t&&x===0&&(M(c),c.clear(),o)){let n=o;throw o=null,n}}}_(){let e=a,t=u;return a=this,u=this._d,this._d=new Set,(n,i)=>{n&&this._s.forEach(W),u.forEach(i?r=>R(this,r):r=>U(this,r)),u.clear(),u=t,a=e}}_u(){}};function A(e){e._p++==0&&e._s.forEach(A)}function W(e){e._q||--e._p!=0||e._s.forEach(W)}function M(e){e.forEach(t=>{if(t._p>0&&(t._q=!0,--t._p==0)){if(t.t)throw new Error("Cycle detected");t._q=!1,t.t=!0,t._u(),t.t=!1,M(t._s)}})}function U(e,t){e._d.add(t),t._s.add(e)}function R(e,t){e._d.delete(t),t._s.delete(e),t._s.size===0&&t._d.forEach(n=>R(t,n))}var I=[];function j(e){if(c.delete(e),e._p=0,e._u(),o){let t=o;throw o=null,t}e._s.forEach(t=>{t._p>0&&(t._p>1&&t._p--,I.push(t))})}function q(e){y=!0;try{j(e)}finally{y=!1}}function d(e){return new _(e)}function S(e){let t=new _(void 0);return t._r=!0,t._u=function(){let n=t._();try{let i=e();n(t._v===i,!0),t._v=i}catch(i){o||(o=i),n(!0,!1)}},t}w=a=new _(void 0),w._c=!0;var E=new WeakSet,B=new WeakSet,D=new WeakSet;function f(e,t){m[e]=t.bind(null,m[e]||(()=>{}))}var b,F,k,l=new WeakMap;function v(e){k&&k(!0,!0),F=e,k=e&&e._()}function G(e){let t=d(void 0);return t._c=!0,t._u=e,t}function J(e){let t=l.get(e);if(t)t.__.length=0;else{let n=[];t=G(()=>{let i=e.__e;for(let r=0;r<n.length;r++){let{t:s,i:p}=n[r],h=p._v;if(!i)return;s in i?i[s]=h:h?i.setAttribute(s,h):i.removeAttribute(s)}}),t.__=n,l.set(e,t)}return t}function H(e,t,n){typeof e!="object"||e==null||(Array.isArray(e)?e.forEach(H):e instanceof _&&(n[t]=z(N,{data:e})))}function N({data:e}){let t=K(e);t.value=e;let n=g(()=>{let i=this.__v;for(;i=i.__;)if(i.__c){D.add(i.__c);break}return F._u=()=>{this.base.data=n._v},S(()=>{let r=t.value.value;return r===0?0:r===!0?"":r||""})},[]);return n.value}function K(e){return g(()=>d(e),[])}N.displayName="_st",f("__b",(e,t)=>{if(typeof t.type=="string"){let n,i=t.props;for(let r in i){let s=i[r];if(r==="children")H(s,"children",i);else if(s instanceof _){n||(n=J(t)),n.__.push({t:r,i:s});let p=n._u;if(s._u){let h=s._u;s._u=()=>{p(),h()}}else s._u=p;i[r]=s.peek()}}v(n)}e(t)}),f("__r",(e,t)=>{let n,i=t.__c;i&&(E.delete(i),n=l.get(i),n===void 0&&(n=G(()=>{E.add(i),i.setState({})}),l.set(i,n))),b=i,v(n),e(t)}),f("__e",(e,t,n,i)=>{v(),b=void 0,e(t,n,i)}),f("diffed",(e,t)=>{v(),b=void 0,e(t)}),f("unmount",(e,t)=>{let n=t.__c||t,i=l.get(n);if(i){l.delete(n);let r=i._d;r&&(r.forEach(s=>s._s.delete(i)),r.clear())}e(t)}),f("__h",(e,t,n,i)=>{i<3&&B.add(t),e(t,n,i)}),C.prototype.shouldComponentUpdate=function(e,t){var n;let i=l.get(this);if(!(i&&((n=i._d)==null?void 0:n.size)!==0||D.has(this))||E.has(this)||B.has(this))return!0;for(let r in t)return!0;for(let r in e)if(r!=="__source"&&e[r]!==this.props[r])return!0;for(let r in this.props)if(!(r in e))return!0;return!1};export{d as signal};
