import{a as g,b as m,c as v}from"./chunk-3TT4ZS6S.js";var E=0;function e(a,t,s,n,c){var l,r,i={};for(r in t)r=="ref"?l=t[r]:i[r]=t[r];var u={type:a,props:i,key:s,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--E,__source:c,__self:n};if(typeof a=="function"&&(l=a.defaultProps))for(r in l)i[r]===void 0&&(i[r]=l[r]);return g.vnode&&g.vnode(u),u}function h(a){let{size:t=16}=a;return e("svg",{className:a.class,width:t,height:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}function f(...a){let t=[];return a.forEach(s=>{typeof s=="string"&&s!==""&&t.push(s),typeof s=="object"&&s!==null&&(Array.isArray(s)?t.push(f(...s)):Object.entries(s).forEach(([n,c])=>{typeof n=="string"&&c&&t.push(n)}))}),t.join(" ")}function C({post:a}){let[t,s]=m(""),[n,c]=m(""),[l,r]=m(""),[i,u]=m(!1),d=!t||!n||!l||i;v(()=>{s(localStorage.name||""),c(localStorage.email||"")},[]);let y=o=>{s(o),localStorage.name=o},b=o=>{c(o),localStorage.email=o},w=async()=>{u(!0);try{await new Promise(_=>{setTimeout(_,1e3)});let o=await fetch("/api/comment",{method:"POST",body:JSON.stringify({post:a,name:t,email:n,content:l})}),[p,x]=await o.json();if(x.status!==201)throw new Error(p.message);if(p.status==="hold")throw new Error("Thank you for your reply. We received your comment. It will be published when it's manually approved by the site owner.");location.reload()}catch(o){let p=document.createElement("div");p.innerHTML=o.message,alert(p.textContent)}finally{u(!1)}};return e("section",{class:"mt-20",children:[e("h2",{class:"text-2xl",children:"Leave a Reply"}),e("div",{class:"mt-4 flex flex-col gap-2 items-stretch",children:[e("label",{children:"Comment"}),e("textarea",{class:"border rounded p-2",onInput:o=>r(o.currentTarget.value),children:l}),e("label",{class:"mt-2",children:"Name"}),e("input",{size:20,class:"border rounded p-2",value:t,onInput:o=>y(o.currentTarget.value)}),e("label",{class:"mt-2",children:"Email"}),e("input",{class:"border rounded p-2",value:n,onInput:o=>b(o.currentTarget.value)}),e("span",{class:"text-sm",children:"Your email address will not be published."}),e("button",{class:f("self-start mt-6 p-4 bg-blue-700 text-white rounded flex gap-2 items-center",d?"cursor-not-allowed":"cursor-pointer",d&&"opacity-30"),disabled:d,onClick:w,children:[i&&e(h,{class:"animate-spin"}),e("span",{children:"Post Comment"})]})]})]})}export{C as default};
